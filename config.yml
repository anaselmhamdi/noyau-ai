# NoyauAI Configuration
# See SPECS.md for full documentation

digest:
  max_items: 10
  send_time_default_local: "08:00"
  web_soft_gate:
    free_items: 5

filters:
  exclude_politics: true
  politics_keywords:
    - "election"
    - "senate"
    - "parliament"
    - "candidate"
    - "campaign"
    - "prime minister"
    - "president"
    - "vote"
    - "party"
    - "democrat"
    - "republican"
    - "congress"
    - "legislation"
    - "ballot"

ranking:
  half_life_hours: 18
  weights:
    recency: 0.30
    engagement: 0.20
    velocity: 0.25
    echo: 0.25
  echo_window_hours: 12
  viral:
    engagement_pctl: 90
    velocity_pctl: 90
    echo_accounts: 3
    multiplier: 1.35
  practical_boost_keywords:
    - "release"
    - "changelog"
    - "benchmark"
    - "postmortem"
    - "incident"
    - "outage"
    - "cve"
    - "exploit"
    - "patch"
    - "migration"
    - "performance"
    - "vulnerability"
    - "advisory"
    - "security"
    - "breaking change"
    - "deprecation"
  practical_boost_value: 0.15
  already_seen_penalty: 0.30
  source_thresholds:
    devto:
      min_reactions: 20           # Minimum reactions to avoid penalty
      low_engagement_penalty: 0.25  # Score reduction when below threshold

seeds:
  # RSS feeds for cloud providers, changelogs, kubernetes, arXiv
  rss_feeds:
    # Cloud provider blogs
    - url: "https://cloud.google.com/blog/rss"
      name: "Google Cloud Blog"
    - url: "https://aws.amazon.com/blogs/aws/feed/"
      name: "AWS Blog"
    # Kubernetes
    - url: "https://kubernetes.io/feed.xml"
      name: "Kubernetes Blog"
    # Hacker News (top stories)
    - url: "https://hnrss.org/frontpage"
      name: "Hacker News"
    # arXiv CS (AI/ML)
    - url: "http://export.arxiv.org/rss/cs.AI"
      name: "arXiv CS.AI"
    - url: "http://export.arxiv.org/rss/cs.LG"
      name: "arXiv CS.LG"
    # Engineering blogs (high-quality postmortems, releases, deep-dives)
    - url: "https://lobste.rs/rss"
      name: "Lobsters"
    - url: "https://blog.cloudflare.com/rss/"
      name: "Cloudflare Blog"
    - url: "https://netflixtechblog.com/feed"
      name: "Netflix Tech Blog"
    - url: "https://stripe.com/blog/engineering/feed.rss"
      name: "Stripe Engineering"
    - url: "https://eng.uber.com/feed/"
      name: "Uber Engineering"
    - url: "https://engineering.fb.com/feed/"
      name: "Meta Engineering"
    - url: "https://discord.com/blog/engineering/rss.xml"
      name: "Discord Engineering"
    - url: "https://fly.io/blog/feed.xml"
      name: "Fly.io Blog"
    - url: "https://linear.app/blog/rss"
      name: "Linear Blog"
    - url: "https://simonwillison.net/atom/everything/"
      name: "Simon Willison Blog"
    - url: "https://changelog.com/news/feed"
      name: "Changelog News"
    # Security (triggers practical boost keywords)
    - url: "https://www.cisa.gov/cybersecurity-advisories/all.xml"
      name: "CISA Advisories"
    # AI/ML
    - url: "https://huggingface.co/papers/rss.xml"
      name: "HuggingFace Daily Papers"
    # Ecosystem newsletters
    - url: "https://golangweekly.com/rss/"
      name: "Go Weekly"
    - url: "https://pycoders.com/feed"
      name: "PyCoder's Weekly"
    - url: "https://this-week-in-rust.org/rss.xml"
      name: "This Week in Rust"
    # Mastodon accounts (tech community - just RSS feeds)
    - url: "https://hachyderm.io/@kelseyhightower.rss"
      name: "Kelsey Hightower (Mastodon)"
    - url: "https://mastodon.social/@gaborcselle.rss"
      name: "Gabor Cselle (Mastodon)"
    - url: "https://mastodon.social/@antirez.rss"
      name: "Antirez (Mastodon)"
    - url: "https://infosec.exchange/@taviso.rss"
      name: "Tavis Ormandy (Mastodon)"
    - url: "https://hachyderm.io/@mjg59.rss"
      name: "Matthew Garrett (Mastodon)"
    - url: "https://mastodon.social/@Mer__edith.rss"
      name: "Meredith Whittaker (Mastodon)"
    - url: "https://fosstodon.org/@ThePracticalDev.rss"
      name: "DEV Community (Mastodon)"

  # GitHub releases.atom feeds for key projects
  github_release_feeds:
    - url: "https://github.com/kubernetes/kubernetes/releases.atom"
      name: "Kubernetes"
    - url: "https://github.com/golang/go/releases.atom"
      name: "Go"
    - url: "https://github.com/python/cpython/releases.atom"
      name: "Python"
    - url: "https://github.com/langchain-ai/langchain/releases.atom"
      name: "LangChain"
    - url: "https://github.com/openai/openai-python/releases.atom"
      name: "OpenAI Python SDK"
    - url: "https://github.com/astral-sh/uv/releases.atom"
      name: "uv"
    - url: "https://github.com/astral-sh/ruff/releases.atom"
      name: "Ruff"
    - url: "https://github.com/apache/kafka/releases.atom"
      name: "Apache Kafka"
    - url: "https://github.com/open-telemetry/opentelemetry-python/releases.atom"
      name: "OpenTelemetry Python"
    - url: "https://github.com/dbt-labs/dbt-core/releases.atom"
      name: "dbt-core"
    # Core infrastructure
    - url: "https://github.com/docker/cli/releases.atom"
      name: "Docker CLI"
    - url: "https://github.com/hashicorp/terraform/releases.atom"
      name: "Terraform"
    - url: "https://github.com/grafana/grafana/releases.atom"
      name: "Grafana"
    - url: "https://github.com/prometheus/prometheus/releases.atom"
      name: "Prometheus"
    # Languages & runtimes
    - url: "https://github.com/rust-lang/rust/releases.atom"
      name: "Rust"
    - url: "https://github.com/nodejs/node/releases.atom"
      name: "Node.js"
    # Frameworks
    - url: "https://github.com/vercel/next.js/releases.atom"
      name: "Next.js"
    - url: "https://github.com/facebook/react/releases.atom"
      name: "React"
    # AI/ML
    - url: "https://github.com/huggingface/transformers/releases.atom"
      name: "Transformers"
    - url: "https://github.com/anthropics/anthropic-sdk-python/releases.atom"
      name: "Anthropic Python SDK"
    - url: "https://github.com/vllm-project/vllm/releases.atom"
      name: "vLLM"

  # Curated X/Twitter accounts (fetched via Nitter RSS)
  x_accounts:
    # Core tech accounts
    - username: "kelaboratory"
      name: "Karpathy"
    - username: "sama"
      name: "Sam Altman"
    - username: "elikifolli"
      name: "Elie Kikfolli"
    - username: "simonw"
      name: "Simon Willison"
    - username: "taborsky"
      name: "Mitchell Hashimoto"
    # Developer experience
    - username: "levelsio"
      name: "Pieter Levels"
    - username: "swyx"
      name: "swyx"
    # SRE/Observability
    - username: "lizthegrey"
      name: "Liz Fong-Jones"
    - username: "maboroshi"
      name: "Charity Majors"

  # Reddit subreddits
  reddit_subreddits:
    - name: "programming"
    - name: "golang"
    - name: "Python"
    - name: "kubernetes"
    - name: "devops"
    - name: "MachineLearning"
    - name: "ExperiencedDevs"
    - name: "rust"
    - name: "node"
    - name: "netsec"
    - name: "selfhosted"
    - name: "LocalLLaMA"

  # dev.to tags
  devto_tags:
    - "python"
    - "go"
    - "kubernetes"
    - "devops"
    - "machinelearning"
    - "ai"
    - "webdev"
    - "rust"
    - "security"
    - "database"
    - "observability"

  # YouTube channels (with transcript support)
  youtube_channels:
    - channel_id: "UCsBjURrPoezykLs9EqgamOA"
      name: "Fireship"
    - channel_id: "UCvjgXvBlbQiAfffMZ6zfLKw"
      name: "ThePrimeagen"
    - channel_id: "UC8butISFwT-Wl7EV0hUK0BQ"
      name: "freeCodeCamp"

  # Bluesky accounts (AT Protocol public API)
  bluesky_accounts:
    - handle: "simonwillison.net"
      name: "Simon Willison"
    - handle: "karpathy.bsky.social"
      name: "Andrej Karpathy"
    - handle: "swyx.io"
      name: "swyx"
    - handle: "hamel.bsky.social"
      name: "Hamel Husain"
    - handle: "timnitgebru.bsky.social"
      name: "Timnit Gebru"
    - handle: "jay.bsky.team"
      name: "Jay Graber"
    - handle: "aaronparecki.com"
      name: "Aaron Parecki"

# Nitter configuration for X/Twitter RSS feeds
# Uses self-hosted Nitter instance (requires Twitter session tokens)
# See nitter/README.md for setup instructions
nitter:
  instances:
    # Self-hosted instance (Docker: nitter:8080, local dev: localhost:8080)
    - "nitter:8080"
    - "localhost:8080"
  timeout_seconds: 10
  max_retries: 3

# Discord community integration (webhook posting to channel)
discord:
  enabled: true  # Set to true once webhook is configured
  invite_url: "https://discord.gg/YCbuNqFucb"  # Public invite link for Discord server
  post_time_utc: "07:30"  # When to post daily digest (after email)

# Discord Bot for DM subscriptions
# Users add bot to their server, run /subscribe to get daily digest DMs
# Credentials configured via environment variables (see .env.example)
discord_bot:
  enabled: false  # Set to true once bot token is configured
  post_time_utc: "07:30"  # When to send DMs (same as channel post)
  invite_url: "https://discord.com/oauth2/authorize?client_id=1460418290143723541&permissions=2048&scope=bot%20applications.commands"

# Twitter thread posting for daily digest
# Uses Twitter API v2 with OAuth 1.0a User Context
# Credentials configured via environment variables (see .env.example)
twitter:
  enabled: true  # Set to true once API credentials are configured
  intro_template: "{date} Tech Briefing\n\n10 things worth knowing today. No fluff.\n\nLet's go ↓"
  outro_template: "That's your daily briefing.\n\nGet this in your inbox → noyau.news\nFollow for tomorrow's thread\n\nSee you tomorrow ✌️"
  include_hashtags: true
  retry_delay_seconds: 5
  max_retries: 3

# TikTok Content Posting API
# Uses OAuth 2.0 for authentication
# Credentials configured via environment variables (see .env.example)
# Initial setup: visit /api/auth/tiktok/authorize to get tokens
tiktok:
  enabled: false  # Set to true once API credentials are configured
  videos_per_day: 1  # Number of videos to post daily (top N)
  # Sandbox mode requires SELF_ONLY; change to PUBLIC_TO_EVERYONE after TikTok app approval
  privacy_level: "SELF_ONLY"  # PUBLIC_TO_EVERYONE, MUTUAL_FOLLOW_FRIENDS, SELF_ONLY
  disable_duet: false
  disable_comment: false
  disable_stitch: false
  include_hashtags: true
  default_hashtags:
    - "technews"
    - "programming"
    - "developer"
    - "coding"
    - "noyau"
  redirect_uri: "https://noyau.news/auth/tiktok/callback"
  retry_delay_seconds: 5
  max_retries: 3

# Instagram Reels via Graph API
# Uses Facebook's Instagram Graph API to post Reels
# Credentials configured via environment variables (see .env.example)
instagram:
  enabled: true  # Set to true once API credentials are configured
  reels_per_day: 1  # Number of Reels to post daily (top N)
  include_hashtags: true
  default_hashtags:
    - "technews"
    - "programming"
    - "developer"
    - "coding"
    - "tech"
    - "reels"

# Video generation for short-form content (YouTube Shorts, etc.)
video:
  enabled: true  # Set to true once Pexels + YouTube credentials are configured
  count: 3  # Number of videos to generate daily (top N stories)
  output_dir: "./output/videos"  # Directory for generated videos

  # Video format (YouTube Shorts specs)
  format:
    width: 1080
    height: 1920
    fps: 30
    duration_target: 45  # Target duration in seconds
    max_duration: 60  # Maximum duration allowed

  # Visual style
  style:
    font: "Inter"
    font_size: 48
    font_color: "#FFFFFF"
    background_color: "#0A0A0A"
    accent_color: "#22D3EE"  # NoyauAI signal cyan

  # Stock footage settings (Pexels API)
  stock_footage:
    provider: "pexels"
    orientation: "portrait"
    per_page: 5
    fallback_queries:
      - "technology"
      - "coding"
      - "futuristic"
      - "data visualization"

  # YouTube upload settings
  youtube:
    category_id: "28"  # Science & Technology
    privacy_status: "unlisted"  # Start with unlisted for testing
    made_for_kids: false
    default_language: "en"
    default_tags:
      - "tech news"
      - "programming"
      - "noyau"
      - "developer news"
